!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).Designable=t.Designable||{},t.Designable.Shared={}))}(this,(function(t){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},e(t,n)};var n=function(){return n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},n.apply(this,arguments)};function r(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}var i=function(t){return function(e){return null!=e&&(Array.isArray(t)?t:[t]).some((function(t){return o(e)==="[object ".concat(t,"]")}))}},o=function(t){return Object.prototype.toString.call(t)},a=i(["Function","AsyncFunction","GeneratorFunction"]),u=i("Window"),s=Array.isArray,c=i("Object"),l=i("String"),f=i("Boolean"),h=i("Number"),d=function(t){return"object"==typeof t},y=i("RegExp"),v=function(t){return!isNaN(t)&&h(t)},p=Symbol("UNSUBSCRIBE_ID_SYMBOL"),b=function(){function t(){var t=this;this.subscribers={index:0},this.unsubscribe=function(e){if(null!=e)a(e)?delete t.subscribers[e[p]]:delete t.subscribers[e];else for(var n in t.subscribers)t.unsubscribe(n)}}return t.prototype.dispatch=function(t,e){var n=!1;for(var r in this.subscribers)a(this.subscribers[r])&&(t.context=e,!1===this.subscribers[r](t)&&(n=!0));return!n},t.prototype.subscribe=function(t){var e,n=this;a(t)&&(e=this.subscribers.index+1,this.subscribers[e]=t,this.subscribers.index++);var r=function(){n.unsubscribe(e)};return r[p]=e,r},t}();var m=function(){try{if("undefined"!=typeof self)return self}catch(t){}try{if(void 0!==m)return m}catch(t){}try{if("undefined"!=typeof global)return global}catch(t){}return Function("return this")()}(),g=Symbol("ATTACHED_SYMBOL"),w=Symbol("__EVENTS_SYMBOL__"),x=Symbol("EVENTS_ONCE_SYMBOL"),E=Symbol("EVENTS_BATCH_SYMBOL"),S=Symbol("DRIVER_INSTANCES_SYMBOL"),O=function(t){return"onlyOne"===t||"onlyChild"===t||"onlyParent"===t},M=function(){function t(t,e){this.container=document,this.contentWindow=m,this.engine=t,this.context=e}return t.prototype.dispatch=function(t){return this.engine.dispatch(t,this.context)},t.prototype.subscribe=function(t){return this.engine.subscribe(t)},t.prototype.subscribeTo=function(t,e){return this.engine.subscribeTo(t,e)},t.prototype.subscribeWith=function(t,e){return this.engine.subscribeWith(t,e)},t.prototype.attach=function(t){console.error("attach must implement.")},t.prototype.detach=function(t){console.error("attach must implement.")},t.prototype.eventTarget=function(t){var e;return"resize"!==t&&"scroll"!==t||this.container!==(null===(e=this.contentWindow)||void 0===e?void 0:e.document)?this.container:this.contentWindow},t.prototype.addEventListener=function(t,e,n){var r,i,o,a,u=this.eventTarget(t);if(O(null==n?void 0:n.mode)){u[x]=u[x]||{};var s=this.constructor;s[x]=s[x]||{};var c=u[x][t],l=s[x][t];if(!c){if(l)if("onlyChild"===n.mode)l.contains(u)&&(l.removeEventListener(t,l[x][t],n),delete l[x][t]);else if("onlyParent"===n.mode&&l.contains(u))return;u.addEventListener(t,e,n),u[x][t]=e,s[x][t]=u}}else u[w]=u[w]||{},u[w][t]=u[w][t]||new Map,(null===(i=null===(r=u[w][t])||void 0===r?void 0:r.get)||void 0===i?void 0:i.call(r,e))||(u.addEventListener(t,e,n),null===(a=null===(o=u[w][t])||void 0===o?void 0:o.set)||void 0===a||a.call(o,e,!0))},t.prototype.removeEventListener=function(t,e,n){var r,i,o=this.eventTarget(t);if(O(null==n?void 0:n.mode)){var a=this.constructor;a[x]=a[x]||{},o[x]=o[x]||{},delete a[x][t],delete o[x][t],o.removeEventListener(t,e,n)}else o[w]=o[w]||{},o[w][t]=o[w][t]||new Map,null===(i=null===(r=o[w][t])||void 0===r?void 0:r.delete)||void 0===i||i.call(r,e),o.removeEventListener(t,e,n)},t.prototype.batchAddEventListener=function(t,e,n){this.engine[S]=this.engine[S]||[],this.engine[S].includes(this)||this.engine[S].push(this),this.engine[S].forEach((function(r){var i=r.eventTarget(t);i[E]=i[E]||{},i[E][t]||(i.addEventListener(t,e,n),i[E][t]=e)}))},t.prototype.batchRemoveEventListener=function(t,e,n){this.engine[S]=this.engine[S]||[],this.engine[S].forEach((function(r){var i=r.eventTarget(t);i[E]=i[E]||{},i.removeEventListener(t,e,n),delete i[E][t]}))},t}(),T=function(t){function n(e){var n=t.call(this)||this;return n.drivers=[],n.containers=[],s(null==e?void 0:e.effects)&&e.effects.forEach((function(t){t(n)})),s(null==e?void 0:e.drivers)&&(n.drivers=e.drivers),n}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(n,t),n.prototype.subscribeTo=function(t,e){return this.subscribe((function(n){if(t&&n instanceof t)return e(n)}))},n.prototype.subscribeWith=function(t,e){return this.subscribe((function(n){if(s(t)){if(t.includes(null==n?void 0:n.type))return e(n)}else if(t&&(null==n?void 0:n.type)===t)return e(n)}))},n.prototype.attachEvents=function(t,e,n){var r=this;if(void 0===e&&(e=m),t)return u(t)?this.attachEvents(t.document,t,n):void(t[g]||(t[g]=this.drivers.map((function(i){var o=new i(r,n);return o.contentWindow=e,o.container=t,o.attach(t),o})),this.containers.includes(t)||this.containers.push(t)))},n.prototype.detachEvents=function(t){var e=this;if(t)return u(t)?this.detachEvents(t.document):void(t[g]&&(t[g].forEach((function(e){e.detach(t)})),this[S]=this[S]||[],this[S]=this[S].reduce((function(e,n){return n.container===t?(n.detach(t),e):e.concat(n)}),[]),this.containers=this.containers.filter((function(e){return e!==t})),delete t[g],delete t[w],delete t[x],delete t[E]));this.containers.forEach((function(t){e.detachEvents(t)}))},n}(b),R=function(t,e){void 0===t&&(t=10);var n=null,r=null,i=function(){n||(n=requestAnimationFrame((function(o){null===r&&(r=o),e((o-r)/1e3*t),n=null,i()})))};return i(),function(){n&&(cancelAnimationFrame(n),n=null),r=null}},A=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1/0),e>=t?(e-t)/e:0},L=function(t,e,n,r){if(t)if(u(t))"x"===e?t.scrollBy({left:n,behavior:"smooth"}):t.scrollBy({top:n,behavior:"smooth"}),a(r)&&r(n);else if("x"===e){if(t.scrollLeft+n>t.scrollWidth)return;t.scrollLeft+=n,a(r)&&r(t.scrollLeft)}else{if(t.scrollTop+n>t.scrollHeight)return;t.scrollTop+=n,a(r)&&r(t.scrollTop)}};function k(t){return v(null==t?void 0:t.x)&&v(null==t?void 0:t.y)}function F(t){return k(null==t?void 0:t.start)&&k(null==t?void 0:t.end)}var P,I=function(t,e){this.x=t,this.y=e},C=function(){function t(t,e,n,r){this.x=0,this.y=0,this.width=0,this.height=0,this.x=t,this.y=e,this.width=n,this.height=r}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),t}(),N=function(t,e){this.start=n({},t),this.end=n({},e)};function D(t,e,n){void 0===n&&(n=!0);var r=function(t){if(!n)return 0;var e=.1*t;return e>20?20:e<10?10:e};return t.x>=e.x+r(e.width)&&t.x<=e.x+e.width-r(e.width)&&t.y>=e.y+r(e.height)&&t.y<=e.y+e.height-r(e.height)}function _(t){return[new I(t.x,t.y),new I(t.x+t.width,t.y),new I(t.x+t.width,t.y+t.height),new I(t.x,t.y+t.height)]}function B(e,n){var r=D(e,n);return e.x<=n.x+n.width/2?e.y<=n.y+n.height/2?r?t.RectQuadrant.Inner1:t.RectQuadrant.Outer1:r?t.RectQuadrant.Inner4:t.RectQuadrant.Outer4:e.y<=n.y+n.height/2?r?t.RectQuadrant.Inner2:t.RectQuadrant.Outer2:r?t.RectQuadrant.Inner3:t.RectQuadrant.Outer3}function j(t,e){var n=Math.min(Math.abs(t.x-e.x),Math.abs(t.x-(e.x+e.width))),r=Math.min(Math.abs(t.y-e.y),Math.abs(t.y-(e.y+e.height)));return t.x>=e.x&&t.x<=e.x+e.width&&(n=0),t.y>=e.y&&t.y<=e.y+e.height&&(r=0),Math.sqrt(Math.pow(n,2)+Math.pow(r,2))}t.RectQuadrant=void 0,(P=t.RectQuadrant||(t.RectQuadrant={})).Inner1="I1",P.Inner2="I2",P.Inner3="I3",P.Inner4="I4",P.Outer1="O1",P.Outer2="O2",P.Outer3="O3",P.Outer4="O4";for(var U=36,z="";U--;)z+=U.toString(36);var W=function(t,e){return a(e)?t instanceof e:!!l(e)&&(!!m[e]&&t instanceof m[e])},q=[["Map",function(t){return new Map(t)}],["WeakMap",function(t){return new WeakMap(t)}],["WeakSet",function(t){return new WeakSet(t)}],["Set",function(t){return new Set(t)}],["Date",function(t){return new Date(t)}],"FileList","File","URL","RegExp",["Promise",function(t){return new Promise((function(e,n){return t.then(e,n)}))}]],Q=function(t){for(var e=0;e<q.length;e++){var n=q[e];if(Array.isArray(n)&&n[0]){if(W(t,n[0]))return n[1]?n[1]:n[0]}else if(W(t,n))return n}},V=function(t,e){var n;if(Array.isArray(t))return t.map((function(t){return V(t,e)}));if(Q(t))return n=Q(t),a(n)?n(t):t;if("object"==typeof t&&t){if("$$typeof"in t&&"_owner"in t)return t;if(t._isAMomentObject)return t;if(t._isJSONSchemaObject)return t;if(a(t.toJS))return t;if(a(t.toJSON))return t;if(Object.getOwnPropertySymbols(t||{}).length)return t;var r={};for(var i in t)Object.hasOwnProperty.call(t,i)&&(a(e)?e(t[i],i)?r[i]=V(t[i],e):r[i]=t[i]:r[i]=V(t[i],e));return r}return t},H=Symbol("newer"),K=Symbol("older");function Y(t,e){this.key=t,this.value=e,this[H]=void 0,this[K]=void 0}var G=function(){function t(t,e){"number"!=typeof t&&(e=t,t=0),this.size=0,this.limit=t,this.oldest=this.newest=void 0,this._keymap=new Map,e&&(this.assign(e),t<1&&(this.limit=this.size))}return t.prototype._markEntryAsUsed=function(t){t!==this.newest&&(t[H]&&(t===this.oldest&&(this.oldest=t[H]),t[H][K]=t[K]),t[K]&&(t[K][H]=t[H]),t[H]=void 0,t[K]=this.newest,this.newest&&(this.newest[H]=t),this.newest=t)},t.prototype.assign=function(t){var e,n=this.limit||Number.MAX_VALUE;this._keymap.clear();for(var r=t[Symbol.iterator](),i=r.next();!i.done;i=r.next()){var o=new Y(i.value[0],i.value[1]);if(this._keymap.set(o.key,o),e?(e[H]=o,o[K]=e):this.oldest=o,e=o,0==n--)throw new Error("overflow")}this.newest=e,this.size=this._keymap.size},t.prototype.get=function(t){var e=this._keymap.get(t);if(e)return this._markEntryAsUsed(e),e.value},t.prototype.set=function(t,e){var n=this._keymap.get(t);return n?(n.value=e,this._markEntryAsUsed(n),this):(this._keymap.set(t,n=new Y(t,e)),this.newest?(this.newest[H]=n,n[K]=this.newest):this.oldest=n,this.newest=n,++this.size,this.size>this.limit&&this.shift(),this)},t.prototype.shift=function(){var t=this.oldest;if(t)return this.oldest[H]?(this.oldest=this.oldest[H],this.oldest[K]=void 0):(this.oldest=void 0,this.newest=void 0),t[H]=t[K]=void 0,this._keymap.delete(t.key),--this.size,[t.key,t.value]},t.prototype.find=function(t){var e=this._keymap.get(t);return e?e.value:void 0},t.prototype.has=function(t){return this._keymap.has(t)},t.prototype.delete=function(t){var e=this._keymap.get(t);if(e)return this._keymap.delete(e.key),e[H]&&e[K]?(e[K][H]=e[H],e[H][K]=e[K]):e[H]?(e[H][K]=void 0,this.oldest=e[H]):e[K]?(e[K][H]=void 0,this.newest=e[K]):this.oldest=this.newest=void 0,this.size--,e.value},t.prototype.clear=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()},t.prototype.keys=function(){return new X(this.oldest)},t.prototype.values=function(){return new Z(this.oldest)},t.prototype.entries=function(){},t.prototype.forEach=function(t,e){"object"!=typeof e&&(e=this);for(var n=this.oldest;n;)t.call(e,n.value,n.key,this),n=n[H]},t.prototype.toJSON=function(){for(var t=new Array(this.size),e=0,n=this.oldest;n;)t[e++]={key:n.key,value:n.value},n=n[H];return t},t.prototype.toString=function(){for(var t="",e=this.oldest;e;)t+=String(e.key)+":"+e.value,(e=e[H])&&(t+=" < ");return t},t.prototype[Symbol.iterator]=function(){return new J(this.oldest)},t}(),J=function(){function t(t){this.entry=t}return t.prototype[Symbol.iterator]=function(){return this},t.prototype.next=function(){var t=this.entry;return t?(this.entry=t[H],{done:!1,value:[t.key,t.value]}):{done:!0,value:void 0}},t}(),X=function(){function t(t){this.entry=t}return t.prototype[Symbol.iterator]=function(){return this},t.prototype.next=function(){var t=this.entry;return t?(this.entry=t[H],{done:!1,value:t.key}):{done:!0,value:void 0}},t}(),Z=function(){function t(t){this.entry=t}return t.prototype[Symbol.iterator]=function(){return this},t.prototype.next=function(){var t=this.entry;return t?(this.entry=t[H],{done:!1,value:t.value}):{done:!0,value:void 0}},t}(),$=function(t){return s(t)?t:t?[t]:[]};function tt(t,e,n){if(s(t)||l(t)){if(n){for(var r=t.length-1;r>=0;r--)if(!1===e(t[r],r))return}else for(r=0;r<t.length;r++)if(!1===e(t[r],r))return}else if(d(t)){var i=void 0;for(i in t)if(Object.hasOwnProperty.call(t,i)&&!1===e(t[i],i))return}}function et(t,e,n){var r=!1;return tt(t,(function(t,n){if(e(t,n))return r=!0,!1}),n),r}var nt,rt=function(t){return $(t).reduce((function(t,e){return s(e)?t.concat(rt(e)):t.concat(e)}),[])};t.KeyCode=void 0,(nt=t.KeyCode||(t.KeyCode={})).Backspace="Backspace",nt.Tab="Tab",nt.Enter="Enter",nt.Shift="Shift",nt.Control="Control",nt.Alt="Alt",nt.CapsLock="CapsLock",nt.Escape="Escape",nt.Space=" ",nt.PageUp="PageUp",nt.PageDown="PageDown",nt.End="End",nt.Home="Home",nt.ArrowLeft="ArrowLeft",nt.ArrowUp="ArrowUp",nt.ArrowRight="ArrowRight",nt.ArrowDown="ArrowDown",nt.Left="Left",nt.Up="Up",nt.Right="Right",nt.Down="Down",nt.Insert="Insert",nt.Delete="Delete",nt.Zero="0",nt.ClosedParen=")",nt.One="1",nt.ExclamationMark="!",nt.Two="2",nt.AtSign="@",nt.Three="3",nt.PoundSign="Â£",nt.Hash="#",nt.Four="4",nt.DollarSign="$",nt.Five="5",nt.PercentSign="%",nt.Six="6",nt.Caret="^",nt.Hat="^",nt.Seven="7",nt.Ampersand="&",nt.Eight="8",nt.Star="*",nt.Asterisk="*",nt.Nine="9",nt.OpenParen="(",nt.a="a",nt.b="b",nt.c="c",nt.d="d",nt.e="e",nt.f="f",nt.g="g",nt.h="h",nt.i="i",nt.j="j",nt.k="k",nt.l="l",nt.m="m",nt.n="n",nt.o="o",nt.p="p",nt.q="q",nt.r="r",nt.s="s",nt.t="t",nt.u="u",nt.v="v",nt.w="w",nt.x="x",nt.y="y",nt.z="z",nt.A="A",nt.B="B",nt.C="C",nt.D="D",nt.E="E",nt.F="F",nt.G="G",nt.H="H",nt.I="I",nt.J="J",nt.K="K",nt.L="L",nt.M="M",nt.N="N",nt.O="O",nt.P="P",nt.Q="Q",nt.R="R",nt.S="S",nt.T="T",nt.U="U",nt.V="V",nt.W="W",nt.X="X",nt.Y="Y",nt.Z="Z",nt.Meta="Meta",nt.LeftWindowKey="Meta",nt.RightWindowKey="Meta",nt.Numpad0="0",nt.Numpad1="1",nt.Numpad2="2",nt.Numpad3="3",nt.Numpad4="4",nt.Numpad5="5",nt.Numpad6="6",nt.Numpad7="7",nt.Numpad8="8",nt.Numpad9="9",nt.Multiply="*",nt.Add="+",nt.Subtract="-",nt.DecimalPoint=".",nt.MSDecimalPoint="Decimal",nt.Divide="/",nt.F1="F1",nt.F2="F2",nt.F3="F3",nt.F4="F4",nt.F5="F5",nt.F6="F6",nt.F7="F7",nt.F8="F8",nt.F9="F9",nt.F10="F10",nt.F11="F11",nt.F12="F12",nt.NumLock="NumLock",nt.ScrollLock="ScrollLock",nt.SemiColon=";",nt.Equals="=",nt.Comma=",",nt.Dash="-",nt.Period=".",nt.UnderScore="_",nt.PlusSign="+",nt.ForwardSlash="/",nt.Tilde="~",nt.GraveAccent="`",nt.OpenBracket="[",nt.ClosedBracket="]",nt.Quote="'";var it="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};!function(t){var e={exports:{}};t(e,e.exports)}((function(t){var e;e=function(){var t,e,n,r,i,o,a,u,s="undefined"!=typeof window?window:null!=typeof it?it:this||{},c=s.cancelRequestAnimationFrame&&s.requestAnimationFrame||setTimeout,l=s.cancelRequestAnimationFrame||clearTimeout,f=[],h=0,d=!1,y=7,v=35,p=125,b=0,m=0,g=0,w={get didTimeout(){return!1},timeRemaining:function(){var t=y-(Date.now()-m);return t<0?0:t}},x=(i=function(){y=22,p=66,v=0},u=function(){var t=Date.now()-a;t<99?o=setTimeout(u,99-t):(o=null,i())},function(){a=Date.now(),o||(o=setTimeout(u,99))});function E(){125!=p&&(y=7,p=125,v=35,d&&(d&&(r&&l(r),n&&clearTimeout(n),d=!1),M())),x()}function S(){r=null,n=setTimeout(T,0)}function O(){n=null,c(S)}function M(){d||(e=p-(Date.now()-m),t=Date.now(),d=!0,v&&e<v&&(e=v),e>9?n=setTimeout(O,e):(e=0,O()))}function T(){var r,i,o,a=y>9?9:1;if(m=Date.now(),d=!1,n=null,h>2||m-e-50<t)for(i=0,o=f.length;i<o&&w.timeRemaining()>a;i++)r=f.shift(),g++,r&&r(w);f.length?M():h=0}function R(t){return b++,f.push(t),M(),b}function A(t){var e=t-1-g;f[e]&&(f[e]=null)}if(s.requestIdleCallback&&s.cancelIdleCallback)try{s.requestIdleCallback((function(){}),{timeout:0})}catch(t){!function(t){var e,n;if(s.requestIdleCallback=function(e,n){return n&&"number"==typeof n.timeout?t(e,n.timeout):t(e)},s.IdleCallbackDeadline&&(e=IdleCallbackDeadline.prototype)){if(!(n=Object.getOwnPropertyDescriptor(e,"timeRemaining"))||!n.configurable||!n.get)return;Object.defineProperty(e,"timeRemaining",{value:function(){return n.get.call(this)},enumerable:!0,configurable:!0})}}(s.requestIdleCallback)}else s.requestIdleCallback=R,s.cancelIdleCallback=A,s.document&&document.addEventListener&&(s.addEventListener("scroll",E,!0),s.addEventListener("resize",E),document.addEventListener("focus",E,!0),document.addEventListener("mouseover",E,!0),["click","keypress","touchstart","mousedown"].forEach((function(t){document.addEventListener(t,E,{capture:!0,passive:!0})})),s.MutationObserver&&new MutationObserver(E).observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}));return{request:R,cancel:A}},t.exports?t.exports=e():window.idleCallbackShim=e()}));var ot=new Set(["A","ABBR","ACRONYM","AUDIO","B","BDI","BDO","BIG","BR","BUTTON","CANVAS","CITE","CODE","DATA","DATALIST","DEL","DFN","EM","EMBED","I","IFRAME","IMG","INS","KBD","LABEL","MAP","MARK","METER","NOSCRIPT","OBJECT","OUTPUT","PICTURE","PROGRESS","Q","RUBY","S","SAMP","SELECT","SLOT","SMALL","STRONG","SUB","SUP","SVG","TEMPLATE","TEXTAREA","TIME","U","TT","VAR","VIDEO","WBR","INPUT","SPAN"]),at=function(t,e){return t+parseFloat(e.marginLeft)+parseFloat(e.marginRight)+parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)},ut=function(t){void 0===t&&(t=function(){});var e=this;this.connected=!1,this.observe=function(t){e.resizeObserver.observe(t),e.performanceObserver.observe({entryTypes:["paint","element","layout-shift","event"]}),e.mutationObserver.observe(t,{attributeFilter:["style"],attributes:!0}),e.connected=!0},this.disconnect=function(){e.connected&&(e.resizeObserver.disconnect(),e.performanceObserver.disconnect(),e.mutationObserver.disconnect()),e.connected=!1},this.resizeObserver=new ResizeObserver((function(){return t()})),this.performanceObserver=new PerformanceObserver((function(){t()})),this.mutationObserver=new MutationObserver((function(){return t()}))};t.Event=T,t.EventDriver=M,t.LRUMap=G,t.LayoutObserver=ut,t.LineSegment=N,t.Point=I,t.Rect=C,t.Subscribable=b,t.calcAutoScrollBasicInfo=function(t,e,n,r){void 0===r&&(r=80);var i,o,a,u,s=n.left,c=n.right,l=n.top,f=n.bottom,h=t.x,d=t.y;"x"===e?(i=s,o=c,a=h):(i=l,o=f,a=d);var y=o-i,v=y>400?100:y/3;return o-a<v?{direction:"end",speedFactor:u,speed:r*A(o-a,v)}:a-i<v?{direction:"begin",speedFactor:u,speed:r*A(a-i,v)}:null},t.calcBoundingRect=function(t){if((null==t?void 0:t.length)&&(1!==(null==t?void 0:t.length)||t[0])){var e=1/0,n=-1/0,r=1/0,i=-1/0;return t.forEach((function(t){var o=new C(t.x,t.y,t.width,t.height);o.top<=e&&(e=o.top),o.bottom>=n&&(n=o.bottom),o.left<=r&&(r=o.left),o.right>=i&&(i=o.right)})),new C(r,e,i-r,n-e)}},t.calcClosestEdges=function(t,e){var n,r,i,o,a,u=1/0;if((null===(n=null==t?void 0:t.start)||void 0===n?void 0:n.y)===(null===(r=null==t?void 0:t.end)||void 0===r?void 0:r.y))e.h.forEach((function(e){var n=Math.abs(e.start.y-t.start.y);n<u&&(u=n,a=e)}));else{if((null===(i=null==t?void 0:t.start)||void 0===i?void 0:i.x)!==(null===(o=null==t?void 0:t.end)||void 0===o?void 0:o.x))throw new Error("can not calculate slash distance");e.v.forEach((function(e){var n=Math.abs(e.start.x-t.start.x);n<u&&(u=n,a=e)}))}return[u,a]},t.calcCombineSnapLineSegment=function(t,e){return t.start.x===t.end.x?new N(new I(t.start.x,t.start.y>e.start.y?e.start.y:t.start.y),new I(t.start.x,t.end.y>e.end.y?t.end.y:e.end.y)):new N(new I(t.start.x>e.start.x?e.start.x:t.start.x,t.start.y),new I(t.end.x>e.end.x?t.end.x:e.end.x,t.end.y))},t.calcDistanceOfPointToRect=j,t.calcDistanceOfSnapLineToEdges=function(t,e){var n,r,i,o,a=1/0;if((null===(n=null==t?void 0:t.start)||void 0===n?void 0:n.y)===(null===(r=null==t?void 0:t.end)||void 0===r?void 0:r.y))e.h.forEach((function(e){var n=Math.abs(e.start.y-t.start.y);n<a&&(a=n)}));else{if((null===(i=null==t?void 0:t.start)||void 0===i?void 0:i.x)!==(null===(o=null==t?void 0:t.end)||void 0===o?void 0:o.x))throw new Error("can not calculate slash distance");e.v.forEach((function(e){var n=Math.abs(e.start.x-t.start.x);n<a&&(a=n)}))}return a},t.calcDistancePointToEdge=function(t,e){var n=Math.abs(t.y-e.y),r=Math.abs(t.y-(e.y+e.height)),i=Math.abs(t.x-e.x),o=Math.abs(t.x-(e.x+e.width));return Math.min(n,r,i,o)},t.calcEdgeLinesOfRect=function(t){return{v:[new N(new I(t.x,t.y),new I(t.x,t.y+t.height)),new N(new I(t.x+t.width/2,t.y),new I(t.x+t.width/2,t.y+t.height)),new N(new I(t.x+t.width,t.y),new I(t.x+t.width,t.y+t.height))],h:[new N(new I(t.x,t.y),new I(t.x+t.width,t.y)),new N(new I(t.x,t.y+t.height/2),new I(t.x+t.width,t.y+t.height/2)),new N(new I(t.x,t.y+t.height),new I(t.x+t.width,t.y+t.height))]}},t.calcElementLayout=function(t){if(!t)return"vertical";var e=t.parentElement;if(!e)return"vertical";var n=t.tagName,r=e.tagName,i=getComputedStyle(t),o=getComputedStyle(e),a=function(){var n=t.getBoundingClientRect().width,r=at(n,i),o=e.getBoundingClientRect().width;return r.toFixed(0)<o.toFixed(0)};return"TH"!==n&&"TD"!==n||"TR"!==r?"flex"===o.display&&"row"===o.flexDirection||"grid"===o.display&&a()?"horizontal":ot.has(n)?"block"===i.display&&("left"!==i.float&&"right"!==i.float||!a())?"vertical":"horizontal":void 0:"horizontal"},t.calcElementOuterWidth=at,t.calcElementRotate=function(t){var e,n,r,i=null===(e=null==t?void 0:t.style)||void 0===e?void 0:e.transform;return i?Number(null!==(r=null===(n=i.match(/rotate\(\s*([-\d.]+)/))||void 0===n?void 0:n[1])&&void 0!==r?r:0):0},t.calcElementScale=function(t){var e,n,r,i=null===(e=null==t?void 0:t.style)||void 0===e?void 0:e.transform;return i?Number(null!==(r=null===(n=i.match(/scale\(\s*([-\d.]+)/))||void 0===n?void 0:n[1])&&void 0!==r?r:0):0},t.calcElementTranslate=function(t){var e,n,i,o=null===(e=null==t?void 0:t.style)||void 0===e?void 0:e.transform;if(o){var a=r(null!==(i=null===(n=o.match(/translate(?:3d)?\(\s*([-\d.]+)[a-z]+?[\s,]+([-\d.]+)[a-z]+?(?:[\s,]+([-\d.]+))?[a-z]+?\s*\)/))||void 0===n?void 0:n.slice(1,3))&&void 0!==i?i:[0,0],2),u=a[0],s=a[1];return new I(Number(u),Number(s))}return new I(Number(t.offsetLeft),Number(t.offsetTop))},t.calcExtendsLineSegmentOfRect=function(t,e){if(e.right<t.right&&t.left<=e.right){if(e.bottom<t.top)return{start:{x:e.right,y:e.bottom},end:{x:t.right,y:e.bottom}};if(e.top>t.bottom)return{start:{x:e.right,y:e.top},end:{x:t.right,y:e.top}}}else if(e.left>t.left&&t.right>=e.left){if(e.bottom<t.top)return{start:{x:t.left,y:e.bottom},end:{x:e.left,y:e.bottom}};if(e.top>t.bottom)return{start:{x:t.left,y:e.top},end:{x:e.left,y:e.top}}}if(e.top<t.top&&t.bottom>=e.top){if(e.right<t.left)return{start:{x:e.right,y:e.bottom},end:{x:e.right,y:t.bottom}};if(e.left>t.right)return{start:{x:e.left,y:e.bottom},end:{x:e.left,y:t.bottom}}}else if(e.bottom>t.bottom&&e.top<=t.bottom){if(e.right<t.left)return{start:{x:e.right,y:t.top},end:{x:e.right,y:e.top}};if(e.left>t.right)return{start:{x:e.left,y:t.top},end:{x:e.left,y:e.top}}}},t.calcOffsetOfSnapLineSegmentToEdge=function(t,e){var n,r={x:[(n=e).x,n.x+n.width/2,n.x+n.width],y:[n.y,n.y+n.height/2,n.y+n.height]};if(t.start.x===t.end.x)return{x:i(r.x,t.start.x)-e.x,y:0};function i(t,e){for(var n=1/0,r=-1,i=0;i<t.length;i++){var o=Math.abs(t[i]-e);n>o&&(n=o,r=i)}return t[r]}return{x:0,y:i(r.y,t.start.y)-e.y}},t.calcQuadrantOfPointToRect=B,t.calcRectByStartEndPoint=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=0,o=0;return e.x+n>=t.x&&e.y+r>=t.y?(i=t.x,o=t.y,new C(i-n,o-r,Math.abs(e.x-t.x+n),Math.abs(e.y-t.y+r))):e.x+n<t.x&&e.y+r<t.y?(i=e.x,o=e.y,new C(i,o,Math.abs(e.x-t.x+n),Math.abs(e.y-t.y+r))):e.x+n<t.x&&e.y+r>=t.y?(i=e.x,o=t.y,new C(i-n,o-r,Math.abs(e.x-t.x+n),Math.abs(e.y-t.y+r))):(i=t.x,o=e.y,new C(i,o,Math.abs(e.x-t.x+n),Math.abs(e.y-t.y+r)))},t.calcRectOfAxisLineSegment=function(t){if(F(t)){var e=t.start.x===t.end.x;return new C(t.start.x,t.start.y,e?0:t.end.x-t.start.x,e?t.end.y-t.start.y:0)}},t.calcRelativeOfPointToRect=function(t,e){var n=j(t,e);return{quadrant:B(t,e),distance:n}},t.calcSpaceBlockOfRect=function(t,e,n){var r=new C(t.x,t.y,t.width,t.height),i=new C(e.x,e.y,e.width,e.height);if(!(i.bottom<r.top&&i.left>r.right||i.top>r.bottom&&i.left>r.right||i.bottom<r.top&&i.right<r.left||i.top>r.bottom&&i.right<r.left)){if(i.bottom<r.top){var o=r.top-i.bottom,a=Math.min(i.left,r.left),u=Math.max(i.right,r.right);if(n&&"top"!==n)return;return{type:"top",distance:o,rect:new C(a,i.bottom,u-a,o)}}if(i.top>r.bottom){o=i.top-r.bottom,a=Math.min(i.left,r.left),u=Math.max(i.right,r.right);if(n&&"bottom"!==n)return;return{type:"bottom",distance:o,rect:new C(a,r.bottom,u-a,o)}}if(i.right<r.left){o=r.left-i.right;var s=Math.min(i.top,r.top),c=Math.max(i.bottom,r.bottom);if(n&&"left"!==n)return;return{type:"left",distance:o,rect:new C(i.right,s,o,c-s)}}if(i.left>r.right){o=i.left-r.right;var l=Math.min(i.top,r.top);c=Math.max(i.bottom,r.bottom);if(n&&"right"!==n)return;return{type:"right",distance:o,rect:new C(r.right,l,o,c-l)}}}},t.calcSpeedFactor=A,t.cancelIdle=function(t){m.cancelIdleCallback(t)},t.clone=V,t.compose=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return t.reduce((function(t,e){return e(t)}),e)}},t.createUniformSpeedAnimation=R,t.each=tt,t.every=function(t,e,n){var r=!0;return tt(t,(function(t,n){if(!e(t,n))return r=!1,!1}),n),r},t.find=function(t,e,n){var r;return tt(t,(function(t,n){if(e(t,n))return r=t,!1}),n),r},t.findIndex=function(t,e,n){var r=-1;return tt(t,(function(t,n){if(e(t,n))return r=n,!1}),n),r},t.flat=rt,t.getKeyCodeFromEvent=function(t){return t.key},t.getRectPoints=_,t.getType=o,t.globalThisPolyfill=m,t.includes=function(t,e,n){return l(t)?t.includes(e):et(t,(function(t){return t===e}),n)},t.includesWith=function(t,e){return!!s(t)&&t.some((function(t){return e(t)}))},t.instOf=W,t.isArr=s,t.isBool=f,t.isCrossRectInRect=function(t,e){var n=new I(t.x+t.width/2,t.y+t.height/2),r=new I(e.x+e.width/2,e.y+e.height/2);return Math.abs(n.x-r.x)<=t.width/2+e.width/2&&Math.abs(n.y-r.y)<=t.height/2+e.height/2},t.isEqualRect=function(t,e){return(null==t?void 0:t.x)===(null==e?void 0:e.x)&&t.y===e.y&&t.width===e.width&&t.height===e.height},t.isFn=a,t.isHTMLElement=function(t){return(null==t?void 0:t.nodeName)||(null==t?void 0:t.tagName)},t.isLineSegment=F,t.isNearAfter=function(t,e,n){return void 0===n&&(n=!1),n?Math.abs(t.x-e.x)+Math.abs(t.y-e.y)>Math.abs(t.x-(e.x+e.width))+Math.abs(t.y-(e.y+e.height)):Math.abs(t.y-e.y)>Math.abs(t.y-(e.y+e.height))},t.isNum=h,t.isObj=d,t.isPlainObj=c,t.isPoint=k,t.isPointInRect=D,t.isRect=function(t){return(null==t?void 0:t.x)&&(null==t?void 0:t.y)&&(null==t?void 0:t.width)&&(null==t?void 0:t.height)},t.isRectInRect=function(t,e){var n=r(_(t),4),i=n[0],o=n[1],a=n[2],u=n[3];return D(i,e,!1)&&D(o,e,!1)&&D(a,e,!1)&&D(u,e,!1)},t.isRegExp=y,t.isStr=l,t.isValid=function(t){return null!=t},t.isValidNumber=v,t.isWindow=u,t.map=function(t,e,n){var r=s(t)||l(t)?[]:{};return tt(t,(function(t,n){var i=e(t,n);s(r)?r.push(i):r[n]=i}),n),r},t.reduce=function(t,e,n,r){var i=n;return tt(t,(function(t,n){i=e(i,t,n)}),r),i},t.requestIdle=function(t,e){return m.requestIdleCallback(t,e)},t.scrollAnimate=function(t,e,n,r,i){return R(r,(function(r){L(t,e,"begin"===n?0-r:r,i)}))},t.shallowClone=function(t){var e;return Array.isArray(t)?t.slice(0):Q(t)?(e=Q(t),a(e)?e(t):t):"object"==typeof t&&t?n({},t):void 0},t.some=et,t.toArr=$,t.uid=function(t){for(var e="",n=t||11;n--;)e+=z[36*Math.random()|0];return e},t.updateScrollValue=L,Object.defineProperty(t,"__esModule",{value:!0})}));
