!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(((t="undefined"!=typeof globalThis?globalThis:t||self).Designable=t.Designable||{},t.Designable.Shared={}))}(this,(function(t){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},e(t,n)};var n=function(){return n=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},n.apply(this,arguments)};var r=function(t){return function(e){return null!=e&&(Array.isArray(t)?t:[t]).some((function(t){return i(e)==="[object "+t+"]"}))}},i=function(t){return Object.prototype.toString.call(t)},o=r(["Function","AsyncFunction","GeneratorFunction"]),a=r("Window"),u=Array.isArray,s=r("Object"),c=r("String"),l=r("Boolean"),f=r("Number"),d=function(t){return"object"==typeof t},h=r("RegExp"),y=Symbol("UNSUBSCRIBE_ID_SYMBOL"),p=function(){function t(){var t=this;this.subscribers={index:0},this.unsubscribe=function(e){if(null!=e)o(e)?delete t.subscribers[e[y]]:delete t.subscribers[e];else for(var n in t.subscribers)t.unsubscribe(n)}}return t.prototype.dispatch=function(t,e){var n=!1;for(var r in this.subscribers)o(this.subscribers[r])&&(t.context=e,!1===this.subscribers[r](t)&&(n=!0));return!n},t.prototype.subscribe=function(t){var e,n=this;o(t)&&(e=this.subscribers.index+1,this.subscribers[e]=t,this.subscribers.index++);var r=function(){n.unsubscribe(e)};return r[y]=e,r},t}();var v,b=function(){try{if("undefined"!=typeof self)return self}catch(t){}try{if(void 0!==b)return b}catch(t){}try{if("undefined"!=typeof global)return global}catch(t){}return Function("return this")()}(),m=Symbol("ATTACHED_SYMBOL"),g=Symbol("__EVENTS_SYMBOL__"),w=Symbol("EVENTS_ONCE_SYMBOL"),E=Symbol("EVENTS_BATCH_SYMBOL"),S=Symbol("DRIVER_INSTANCES_SYMBOL"),x=function(t){return"onlyOne"===t||"onlyChild"===t||"onlyParent"===t},M=function(){function t(t,e){this.container=document,this.contentWindow=b,this.engine=t,this.context=e}return t.prototype.dispatch=function(t){return this.engine.dispatch(t,this.context)},t.prototype.subscribe=function(t){return this.engine.subscribe(t)},t.prototype.subscribeTo=function(t,e){return this.engine.subscribeTo(t,e)},t.prototype.subscribeWith=function(t,e){return this.engine.subscribeWith(t,e)},t.prototype.attach=function(t){console.error("attach must implement.")},t.prototype.detach=function(t){console.error("attach must implement.")},t.prototype.eventTarget=function(t){var e;return"resize"!==t&&"scroll"!==t||this.container!==(null===(e=this.contentWindow)||void 0===e?void 0:e.document)?this.container:this.contentWindow},t.prototype.addEventListener=function(t,e,n){var r,i,o,a,u=this.eventTarget(t);if(x(null==n?void 0:n.mode)){u[w]=u[w]||{};var s=this.constructor;s[w]=s[w]||{};var c=u[w][t],l=s[w][t];if(!c){if(l)if("onlyChild"===n.mode)l.contains(u)&&(l.removeEventListener(t,l[w][t],n),delete l[w][t]);else if("onlyParent"===n.mode&&l.contains(u))return;u.addEventListener(t,e,n),u[w][t]=e,s[w][t]=u}}else u[g]=u[g]||{},u[g][t]=u[g][t]||new Map,(null===(i=null===(r=u[g][t])||void 0===r?void 0:r.get)||void 0===i?void 0:i.call(r,e))||(u.addEventListener(t,e,n),null===(a=null===(o=u[g][t])||void 0===o?void 0:o.set)||void 0===a||a.call(o,e,!0))},t.prototype.removeEventListener=function(t,e,n){var r,i,o=this.eventTarget(t);if(x(null==n?void 0:n.mode)){var a=this.constructor;a[w]=a[w]||{},o[w]=o[w]||{},delete a[w][t],delete o[w][t],o.removeEventListener(t,e,n)}else o[g]=o[g]||{},o[g][t]=o[g][t]||new Map,null===(i=null===(r=o[g][t])||void 0===r?void 0:r.delete)||void 0===i||i.call(r,e),o.removeEventListener(t,e,n)},t.prototype.batchAddEventListener=function(t,e,n){this.engine[S]=this.engine[S]||[],this.engine[S].includes(this)||this.engine[S].push(this),this.engine[S].forEach((function(r){var i=r.eventTarget(t);i[E]=i[E]||{},i[E][t]||(i.addEventListener(t,e,n),i[E][t]=e)}))},t.prototype.batchRemoveEventListener=function(t,e,n){this.engine[S]=this.engine[S]||[],this.engine[S].forEach((function(r){var i=r.eventTarget(t);i[E]=i[E]||{},i.removeEventListener(t,e,n),delete i[E][t]}))},t}(),O=function(t){function n(e){var n=t.call(this)||this;return n.drivers=[],n.containers=[],u(null==e?void 0:e.effects)&&e.effects.forEach((function(t){t(n)})),u(null==e?void 0:e.drivers)&&(n.drivers=e.drivers),n}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}(n,t),n.prototype.subscribeTo=function(t,e){return this.subscribe((function(n){if(t&&n instanceof t)return e(n)}))},n.prototype.subscribeWith=function(t,e){return this.subscribe((function(n){if(u(t)){if(t.includes(null==n?void 0:n.type))return e(n)}else if(t&&(null==n?void 0:n.type)===t)return e(n)}))},n.prototype.attachEvents=function(t,e,n){var r=this;if(void 0===e&&(e=b),t)return a(t)?this.attachEvents(t.document,t,n):void(t[m]||(t[m]=this.drivers.map((function(i){var o=new i(r,n);return o.contentWindow=e,o.container=t,o.attach(t),o})),this.containers.includes(t)||this.containers.push(t)))},n.prototype.detachEvents=function(t){var e=this;if(t)return a(t)?this.detachEvents(t.document):void(t[m]&&(t[m].forEach((function(e){e.detach(t)})),this[S]=this[S]||[],this[S]=this[S].reduce((function(e,n){return n.container===t?(n.detach(t),e):e.concat(n)}),[]),this.containers=this.containers.filter((function(e){return e!==t})),delete t[m],delete t[g],delete t[w],delete t[E]));this.containers.forEach((function(t){e.detachEvents(t)}))},n}(p),R=function(t,e){void 0===t&&(t=10);var n=null,r=null,i=function(){n||(n=requestAnimationFrame((function(o){null===r&&(r=o),e((o-r)/1e3*t),n=null,i()})))};return i(),function(){n&&(cancelAnimationFrame(n),n=null),r=null}},A=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=1/0),e>=t?(e-t)/e:0},T=function(t,e,n,r){if(t)if(a(t))"x"===e?t.scrollBy(n,0):t.scrollBy(0,n),o(r)&&r(n);else if("x"===e){if(t.scrollLeft+n>t.scrollWidth)return;t.scrollLeft+=n,o(r)&&r(t.scrollLeft)}else{if(t.scrollTop+n>t.scrollHeight)return;t.scrollTop+=n,o(r)&&r(t.scrollTop)}},k=function(t,e){this.x=t,this.y=e};function D(t,e,n){void 0===n&&(n=!0);var r=function(t){if(!n)return 0;var e=.1*t;return e>20?20:e<10?10:e};return t.x>=e.x+r(e.width)&&t.x<=e.x+e.width-r(e.width)&&t.y>=e.y+r(e.height)&&t.y<=e.y+e.height-r(e.height)}function L(t){return[new k(t.x,t.y),new k(t.x+t.width,t.y),new k(t.x+t.width,t.y+t.height),new k(t.x,t.y+t.height)]}function F(e,n){var r=D(e,n);return e.x<=n.x+n.width/2?e.y<=n.y+n.height/2?r?t.RectQuadrant.Inner1:t.RectQuadrant.Outer1:r?t.RectQuadrant.Inner4:t.RectQuadrant.Outer4:e.y<=n.y+n.height/2?r?t.RectQuadrant.Inner2:t.RectQuadrant.Outer2:r?t.RectQuadrant.Inner3:t.RectQuadrant.Outer3}function I(t,e){var n=Math.min(Math.abs(t.x-e.x),Math.abs(t.x-(e.x+e.width))),r=Math.min(Math.abs(t.y-e.y),Math.abs(t.y-(e.y+e.height)));return t.x>=e.x&&t.x<=e.x+e.width&&(n=0),t.y>=e.y&&t.y<=e.y+e.height&&(r=0),Math.sqrt(Math.pow(n,2)+Math.pow(r,2))}t.RectQuadrant=void 0,(v=t.RectQuadrant||(t.RectQuadrant={})).Inner1="I1",v.Inner2="I2",v.Inner3="I3",v.Inner4="I4",v.Outer1="O1",v.Outer2="O2",v.Outer3="O3",v.Outer4="O4";for(var C=36,P="";C--;)P+=C.toString(36);var _=function(t,e){return o(e)?t instanceof e:!!c(e)&&(!!b[e]&&t instanceof b[e])},N=[["Map",function(t){return new Map(t)}],["WeakMap",function(t){return new WeakMap(t)}],["WeakSet",function(t){return new WeakSet(t)}],["Set",function(t){return new Set(t)}],["Date",function(t){return new Date(t)}],"FileList","File","URL","RegExp",["Promise",function(t){return new Promise((function(e,n){return t.then(e,n)}))}]],B=function(t){for(var e=0;e<N.length;e++){var n=N[e];if(Array.isArray(n)&&n[0]){if(_(t,n[0]))return n[1]?n[1]:n[0]}else if(_(t,n))return n}},U=function(t,e){var n;if(Array.isArray(t))return t.map((function(t){return U(t,e)}));if(B(t))return n=B(t),o(n)?n(t):t;if("object"==typeof t&&t){if("$$typeof"in t&&"_owner"in t)return t;if(t._isAMomentObject)return t;if(t._isJSONSchemaObject)return t;if(o(t.toJS))return t;if(o(t.toJSON))return t;if(Object.getOwnPropertySymbols(t||{}).length)return t;var r={};for(var i in t)Object.hasOwnProperty.call(t,i)&&(o(e)?e(t[i],i)?r[i]=U(t[i],e):r[i]=t[i]:r[i]=U(t[i],e));return r}return t},j=Symbol("newer"),W=Symbol("older");function q(t,e){this.key=t,this.value=e,this[j]=void 0,this[W]=void 0}var z=function(){function t(t,e){"number"!=typeof t&&(e=t,t=0),this.size=0,this.limit=t,this.oldest=this.newest=void 0,this._keymap=new Map,e&&(this.assign(e),t<1&&(this.limit=this.size))}return t.prototype._markEntryAsUsed=function(t){t!==this.newest&&(t[j]&&(t===this.oldest&&(this.oldest=t[j]),t[j][W]=t[W]),t[W]&&(t[W][j]=t[j]),t[j]=void 0,t[W]=this.newest,this.newest&&(this.newest[j]=t),this.newest=t)},t.prototype.assign=function(t){var e,n=this.limit||Number.MAX_VALUE;this._keymap.clear();for(var r=t[Symbol.iterator](),i=r.next();!i.done;i=r.next()){var o=new q(i.value[0],i.value[1]);if(this._keymap.set(o.key,o),e?(e[j]=o,o[W]=e):this.oldest=o,e=o,0==n--)throw new Error("overflow")}this.newest=e,this.size=this._keymap.size},t.prototype.get=function(t){var e=this._keymap.get(t);if(e)return this._markEntryAsUsed(e),e.value},t.prototype.set=function(t,e){var n=this._keymap.get(t);return n?(n.value=e,this._markEntryAsUsed(n),this):(this._keymap.set(t,n=new q(t,e)),this.newest?(this.newest[j]=n,n[W]=this.newest):this.oldest=n,this.newest=n,++this.size,this.size>this.limit&&this.shift(),this)},t.prototype.shift=function(){var t=this.oldest;if(t)return this.oldest[j]?(this.oldest=this.oldest[j],this.oldest[W]=void 0):(this.oldest=void 0,this.newest=void 0),t[j]=t[W]=void 0,this._keymap.delete(t.key),--this.size,[t.key,t.value]},t.prototype.find=function(t){var e=this._keymap.get(t);return e?e.value:void 0},t.prototype.has=function(t){return this._keymap.has(t)},t.prototype.delete=function(t){var e=this._keymap.get(t);if(e)return this._keymap.delete(e.key),e[j]&&e[W]?(e[W][j]=e[j],e[j][W]=e[W]):e[j]?(e[j][W]=void 0,this.oldest=e[j]):e[W]?(e[W][j]=void 0,this.newest=e[W]):this.oldest=this.newest=void 0,this.size--,e.value},t.prototype.clear=function(){this.oldest=this.newest=void 0,this.size=0,this._keymap.clear()},t.prototype.keys=function(){return new V(this.oldest)},t.prototype.values=function(){return new H(this.oldest)},t.prototype.entries=function(){},t.prototype.forEach=function(t,e){"object"!=typeof e&&(e=this);for(var n=this.oldest;n;)t.call(e,n.value,n.key,this),n=n[j]},t.prototype.toJSON=function(){for(var t=new Array(this.size),e=0,n=this.oldest;n;)t[e++]={key:n.key,value:n.value},n=n[j];return t},t.prototype.toString=function(){for(var t="",e=this.oldest;e;)t+=String(e.key)+":"+e.value,(e=e[j])&&(t+=" < ");return t},t.prototype[Symbol.iterator]=function(){return new Q(this.oldest)},t}(),Q=function(){function t(t){this.entry=t}return t.prototype[Symbol.iterator]=function(){return this},t.prototype.next=function(){var t=this.entry;return t?(this.entry=t[j],{done:!1,value:[t.key,t.value]}):{done:!0,value:void 0}},t}(),V=function(){function t(t){this.entry=t}return t.prototype[Symbol.iterator]=function(){return this},t.prototype.next=function(){var t=this.entry;return t?(this.entry=t[j],{done:!1,value:t.key}):{done:!0,value:void 0}},t}(),H=function(){function t(t){this.entry=t}return t.prototype[Symbol.iterator]=function(){return this},t.prototype.next=function(){var t=this.entry;return t?(this.entry=t[j],{done:!1,value:t.value}):{done:!0,value:void 0}},t}(),K=function(t){return u(t)?t:t?[t]:[]};function Y(t,e,n){if(u(t)||c(t)){if(n){for(var r=t.length-1;r>=0;r--)if(!1===e(t[r],r))return}else for(r=0;r<t.length;r++)if(!1===e(t[r],r))return}else if(d(t)){var i=void 0;for(i in t)if(Object.hasOwnProperty.call(t,i)&&!1===e(t[i],i))return}}function G(t,e,n){var r=!1;return Y(t,(function(t,n){if(e(t,n))return r=!0,!1}),n),r}var J,X=function(t){return K(t).reduce((function(t,e){return u(e)?t.concat(X(e)):t.concat(e)}),[])};t.KeyCode=void 0,(J=t.KeyCode||(t.KeyCode={})).Backspace="Backspace",J.Tab="Tab",J.Enter="Enter",J.Shift="Shift",J.Control="Control",J.Alt="Alt",J.CapsLock="CapsLock",J.Escape="Escape",J.Space=" ",J.PageUp="PageUp",J.PageDown="PageDown",J.End="End",J.Home="Home",J.ArrowLeft="ArrowLeft",J.ArrowUp="ArrowUp",J.ArrowRight="ArrowRight",J.ArrowDown="ArrowDown",J.Left="Left",J.Up="Up",J.Right="Right",J.Down="Down",J.Insert="Insert",J.Delete="Delete",J.Zero="0",J.ClosedParen=")",J.One="1",J.ExclamationMark="!",J.Two="2",J.AtSign="@",J.Three="3",J.PoundSign="Â£",J.Hash="#",J.Four="4",J.DollarSign="$",J.Five="5",J.PercentSign="%",J.Six="6",J.Caret="^",J.Hat="^",J.Seven="7",J.Ampersand="&",J.Eight="8",J.Star="*",J.Asterisk="*",J.Nine="9",J.OpenParen="(",J.a="a",J.b="b",J.c="c",J.d="d",J.e="e",J.f="f",J.g="g",J.h="h",J.i="i",J.j="j",J.k="k",J.l="l",J.m="m",J.n="n",J.o="o",J.p="p",J.q="q",J.r="r",J.s="s",J.t="t",J.u="u",J.v="v",J.w="w",J.x="x",J.y="y",J.z="z",J.A="A",J.B="B",J.C="C",J.D="D",J.E="E",J.F="F",J.G="G",J.H="H",J.I="I",J.J="J",J.K="K",J.L="L",J.M="M",J.N="N",J.O="O",J.P="P",J.Q="Q",J.R="R",J.S="S",J.T="T",J.U="U",J.V="V",J.W="W",J.X="X",J.Y="Y",J.Z="Z",J.Meta="Meta",J.LeftWindowKey="Meta",J.RightWindowKey="Meta",J.Numpad0="0",J.Numpad1="1",J.Numpad2="2",J.Numpad3="3",J.Numpad4="4",J.Numpad5="5",J.Numpad6="6",J.Numpad7="7",J.Numpad8="8",J.Numpad9="9",J.Multiply="*",J.Add="+",J.Subtract="-",J.DecimalPoint=".",J.MSDecimalPoint="Decimal",J.Divide="/",J.F1="F1",J.F2="F2",J.F3="F3",J.F4="F4",J.F5="F5",J.F6="F6",J.F7="F7",J.F8="F8",J.F9="F9",J.F10="F10",J.F11="F11",J.F12="F12",J.NumLock="NumLock",J.ScrollLock="ScrollLock",J.SemiColon=";",J.Equals="=",J.Comma=",",J.Dash="-",J.Period=".",J.UnderScore="_",J.PlusSign="+",J.ForwardSlash="/",J.Tilde="~",J.GraveAccent="`",J.OpenBracket="[",J.ClosedBracket="]",J.Quote="'";var Z="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};!function(t){var e={exports:{}};t(e,e.exports)}((function(t){var e;e=function(){var t,e,n,r,i,o,a,u,s="undefined"!=typeof window?window:null!=typeof Z?Z:this||{},c=s.cancelRequestAnimationFrame&&s.requestAnimationFrame||setTimeout,l=s.cancelRequestAnimationFrame||clearTimeout,f=[],d=0,h=!1,y=7,p=35,v=125,b=0,m=0,g=0,w={get didTimeout(){return!1},timeRemaining:function(){var t=y-(Date.now()-m);return t<0?0:t}},E=(i=function(){y=22,v=66,p=0},u=function(){var t=Date.now()-a;t<99?o=setTimeout(u,99-t):(o=null,i())},function(){a=Date.now(),o||(o=setTimeout(u,99))});function S(){125!=v&&(y=7,v=125,p=35,h&&(h&&(r&&l(r),n&&clearTimeout(n),h=!1),O())),E()}function x(){r=null,n=setTimeout(R,0)}function M(){n=null,c(x)}function O(){h||(e=v-(Date.now()-m),t=Date.now(),h=!0,p&&e<p&&(e=p),e>9?n=setTimeout(M,e):(e=0,M()))}function R(){var r,i,o,a=y>9?9:1;if(m=Date.now(),h=!1,n=null,d>2||m-e-50<t)for(i=0,o=f.length;i<o&&w.timeRemaining()>a;i++)r=f.shift(),g++,r&&r(w);f.length?O():d=0}function A(t){return b++,f.push(t),O(),b}function T(t){var e=t-1-g;f[e]&&(f[e]=null)}if(s.requestIdleCallback&&s.cancelIdleCallback)try{s.requestIdleCallback((function(){}),{timeout:0})}catch(t){!function(t){var e,n;if(s.requestIdleCallback=function(e,n){return n&&"number"==typeof n.timeout?t(e,n.timeout):t(e)},s.IdleCallbackDeadline&&(e=IdleCallbackDeadline.prototype)){if(!(n=Object.getOwnPropertyDescriptor(e,"timeRemaining"))||!n.configurable||!n.get)return;Object.defineProperty(e,"timeRemaining",{value:function(){return n.get.call(this)},enumerable:!0,configurable:!0})}}(s.requestIdleCallback)}else s.requestIdleCallback=A,s.cancelIdleCallback=T,s.document&&document.addEventListener&&(s.addEventListener("scroll",S,!0),s.addEventListener("resize",S),document.addEventListener("focus",S,!0),document.addEventListener("mouseover",S,!0),["click","keypress","touchstart","mousedown"].forEach((function(t){document.addEventListener(t,S,{capture:!0,passive:!0})})),s.MutationObserver&&new MutationObserver(S).observe(document.documentElement,{childList:!0,subtree:!0,attributes:!0}));return{request:A,cancel:T}},t.exports?t.exports=e():window.idleCallbackShim=e()}));var $=new Set(["A","ABBR","ACRONYM","AUDIO","B","BDI","BDO","BIG","BR","BUTTON","CANVAS","CITE","CODE","DATA","DATALIST","DEL","DFN","EM","EMBED","I","IFRAME","IMG","INS","KBD","LABEL","MAP","MARK","METER","NOSCRIPT","OBJECT","OUTPUT","PICTURE","PROGRESS","Q","RUBY","S","SAMP","SELECT","SLOT","SMALL","STRONG","SUB","SUP","SVG","TEMPLATE","TEXTAREA","TIME","U","TT","VAR","VIDEO","WBR","INPUT","SPAN"]),tt=function(t,e){return t+parseFloat(e.marginLeft)+parseFloat(e.marginRight)+parseFloat(e.paddingLeft)+parseFloat(e.paddingRight)+parseFloat(e.borderLeftWidth)+parseFloat(e.borderRightWidth)};t.Event=O,t.EventDriver=M,t.LRUMap=z,t.Point=k,t.Subscribable=p,t.calcAutoScrollBasicInfo=function(t,e,n,r){void 0===r&&(r=50);var i,o,a,u,s=n.left,c=n.right,l=n.top,f=n.bottom,d=t.x,h=t.y;"x"===e?(i=s,o=c,a=d):(i=l,o=f,a=h);var y=o-i,p=y>400?100:y/3;return o-a<p?{direction:"end",speedFactor:u,speed:r*A(o-a,p)}:a-i<p?{direction:"begin",speedFactor:u,speed:r*A(a-i,p)}:null},t.calcBoundingRect=function(t){if((null==t?void 0:t.length)&&(1!==(null==t?void 0:t.length)||t[0])){var e=1/0,n=-1/0,r=1/0,i=-1/0;return t.forEach((function(t){var o="undefined"!=typeof DOMRect&&new DOMRect(t.x,t.y,t.width,t.height);o.top<=e&&(e=o.top),o.bottom>=n&&(n=o.bottom),o.left<=r&&(r=o.left),o.right>=i&&(i=o.right)})),"undefined"!=typeof DOMRect&&new DOMRect(r,e,i-r,n-e)}},t.calcDistanceOfPointToRect=I,t.calcDistancePointToEdge=function(t,e){var n=Math.abs(t.y-e.y),r=Math.abs(t.y-(e.y+e.height)),i=Math.abs(t.x-e.x),o=Math.abs(t.x-(e.x+e.width));return Math.min(n,r,i,o)},t.calcElementLayout=function(t){if(!t)return"vertical";var e=t.parentElement,n=t.tagName,r=e.tagName,i=getComputedStyle(t),o=getComputedStyle(e),a=function(){var n=t.getBoundingClientRect().width,r=tt(n,i),o=e.getBoundingClientRect().width;return r.toFixed(0)<o.toFixed(0)};return"TH"!==n&&"TD"!==n||"TR"!==r?"flex"===o.display&&"row"===o.flexDirection||"grid"===o.display&&a()?"horizontal":$.has(n)?"block"===i.display&&("left"!==i.float&&"right"!==i.float||!a())?"vertical":"horizontal":void 0:"horizontal"},t.calcElementOuterWidth=tt,t.calcQuadrantOfPointToRect=F,t.calcRectByStartEndPoint=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=0,o=0;return e.x+n>=t.x&&e.y+r>=t.y?(i=t.x,o=t.y,"undefined"!=typeof DOMRect&&new DOMRect(i-n,o-r,Math.abs(e.x-t.x+n),Math.abs(e.y-t.y+r))):e.x+n<t.x&&e.y+r<t.y?(i=e.x,o=e.y,"undefined"!=typeof DOMRect&&new DOMRect(i,o,Math.abs(e.x-t.x)-n,Math.abs(e.y-t.y)-r)):e.x+n<t.x&&e.y+r>=t.y?(i=e.x,o=t.y,"undefined"!=typeof DOMRect&&new DOMRect(i-n,o-r,Math.abs(e.x-t.x+n),Math.abs(e.y-t.y+r))):(i=t.x,o=e.y,"undefined"!=typeof DOMRect&&new DOMRect(i,o,Math.abs(e.x-t.x)-n,Math.abs(e.y-t.y)-r))},t.calcRelativeOfPointToRect=function(t,e){var n=I(t,e);return{quadrant:F(t,e),distance:n}},t.calcSpeedFactor=A,t.cancelIdle=function(t){b.cancelIdleCallback(t)},t.clone=U,t.compose=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(e){return t.reduce((function(t,e){return e(t)}),e)}},t.createUniformSpeedAnimation=R,t.each=Y,t.every=function(t,e,n){var r=!0;return Y(t,(function(t,n){if(!e(t,n))return r=!1,!1}),n),r},t.find=function(t,e,n){var r;return Y(t,(function(t,n){if(e(t,n))return r=t,!1}),n),r},t.findIndex=function(t,e,n){var r=-1;return Y(t,(function(t,n){if(e(t,n))return r=n,!1}),n),r},t.flat=X,t.getKeyCodeFromEvent=function(t){return t.key},t.getRectPoints=L,t.getType=i,t.globalThisPolyfill=b,t.includes=function(t,e,n){return c(t)?t.includes(e):G(t,(function(t){return t===e}),n)},t.includesWith=function(t,e){return!!u(t)&&t.some((function(t){return e(t)}))},t.instOf=_,t.isArr=u,t.isBool=l,t.isCrossRectInRect=function(t,e){var n=new k(t.x+t.width/2,t.y+t.height/2),r=new k(e.x+e.width/2,e.y+e.height/2);return Math.abs(n.x-r.x)<=t.width/2+e.width/2&&Math.abs(n.y-r.y)<=t.height/2+e.height/2},t.isFn=o,t.isHTMLElement=function(t){return(null==t?void 0:t.nodeName)||(null==t?void 0:t.tagName)},t.isNearAfter=function(t,e,n){return void 0===n&&(n=!1),n?Math.abs(t.x-e.x)+Math.abs(t.y-e.y)>Math.abs(t.x-(e.x+e.width))+Math.abs(t.y-(e.y+e.height)):Math.abs(t.y-e.y)>Math.abs(t.y-(e.y+e.height))},t.isNum=f,t.isObj=d,t.isPlainObj=s,t.isPointInRect=D,t.isRectInRect=function(t,e){var n=function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}(L(e),4),r=n[0],i=n[1],o=n[2],a=n[3];return D(r,t,!1)&&D(i,t,!1)&&D(o,t,!1)&&D(a,t,!1)},t.isRegExp=h,t.isStr=c,t.isValid=function(t){return null!=t},t.isWindow=a,t.map=function(t,e,n){var r=u(t)||c(t)?[]:{};return Y(t,(function(t,n){var i=e(t,n);u(r)?r.push(i):r[n]=i}),n),r},t.reduce=function(t,e,n,r){var i=n;return Y(t,(function(t,n){i=e(i,t,n)}),r),i},t.requestIdle=function(t,e){return b.requestIdleCallback(t,e)},t.scrollAnimate=function(t,e,n,r,i){return R(r,(function(r){T(t,e,"begin"===n?0-r:r,i)}))},t.shallowClone=function(t){var e;return Array.isArray(t)?t.slice(0):B(t)?(e=B(t),o(e)?e(t):t):"object"==typeof t&&t?n({},t):void 0},t.some=G,t.toArr=K,t.uid=function(t){for(var e="",n=t||11;n--;)e+=P[36*Math.random()|0];return e},t.updateScrollValue=T,Object.defineProperty(t,"__esModule",{value:!0})}));
